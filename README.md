# HPC branch README
This is the high level README, read the README in their respective folders folder deeper insights 

## How to use the predictor library ?
source in `$NVMBASE/shared_libs/pred`
To Compile `make -j8; make install`
 
## How to enable interception for a new application ?
There are multiple preloadable files generated by the predictor library
1. libnopred.so : Switches off all the predictors.
2. libonlyospred.so : Switches off all the predictors, switch on only OS predictors
3. libonlyapppred.so : Switches off OS and Lib predictor, let app prefetch if it does
4. libonlylibpred.so : Only Lib predictor runs.
5. libos_apppred.so : OS and App predictors run
6. libos_libpred.so : OS and Lib predictors run
7. libcrosslayer.so : All predictors are switched on

To use any of the above `LD_PRELOAD=/usr/lib/libname.so <APP> <APP_FLAGS>`

Alternatively one could do : 
```
export LD_PRELOAD="/usr/lib/libname.so"
<APP> <APP_FLAGS>
export LD_PRELOAD=""
```

## How to disable fadvice ?
Refer to the README in predictor folder.

##How to use the new linux (5.14.0)
```
git clone <NVMREPOlink> -b hpc
git submodule update --init
```
This will update the two folders with linux in it.


### Compiling and Running RocksDB

```
cd $APPBENCH/apps/RocksDB
./build_rocksdb.sh
./run.sh
```

Change this line in make file and execute compile command
```
LDFLAGS += $(EXTRA_LDFLAGS) -L/usr/lib -lgflags
DEBUG_LEVEL=0 make shared_lib db_bench -j32
```



